// Generated by CoffeeScript 1.4.0
var Slide, confDB, dsn, mongoose;

mongoose = require('mongoose');

Slide = require('../../SOURCE/Models/Slide.js');

dsn = "mongodb://localhost/confTesting";

mongoose.connect(dsn);

confDB = mongoose.connection;

confDB.on('error', console.error.bind(console, 'connection error:'));

describe('when a slide is saved', function() {
  return it('should ', function() {
    var found, noError, saveSlide, slide;
    slide = null;
    noError = null;
    found = null;
    runs(function() {
      noError = false;
      found = false;
      console.log('starting save test');
      slide = new Slide({
        Type: 'text',
        Title: 'a tittle',
        Description: "a description",
        Order: 1,
        JsonData: "{ text : 'my texte'}"
      });
      return console.log("runs done");
    });
    saveSlide = function() {
      console.log("Wait for Saving");
      slide.save(function(err, slide) {
        console.log("into Saving");
        expect(err).toBeNull();
        if (err) {
          return console.log("pas bien");
        } else {
          console.log("bien");
          return noError = true;
        }
      });
      console.log('pas derreur', noError);
      return noError;
    };
    waitsFor(saveSlide, "slide dreated", 1000);
    return runs(function() {
      return console.log("le type du slide est:", slide.Type);
    });
  });
});
